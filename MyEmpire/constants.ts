
import { Scene, Province, Resources } from './types';

export const INITIAL_RESOURCES: Resources = {
  gold: 100,
  army: 50,
  legitimacy: 40,
  food: 80,
  day: 1,
};

export const INITIAL_PROVINCES: Province[] = [
  { id: 'p1', name: 'Столица', status: 'loyal', income: 10 },
  { id: 'p2', name: 'Северный Рубеж', status: 'occupied', income: 0 },
  { id: 'p3', name: 'Жильные Поля', status: 'rebellious', income: 5 },
  { id: 'p4', name: 'Южный Порт', status: 'loyal', income: 15 },
];

export const SCENES: Record<string, Scene> = {
  start: {
    id: 'start',
    title: 'Глава I. Пробуждение',
    paragraphs: [
      "Вечер. Сырой ветер с полей пробирается сквозь трещины старого замкового коридора, неся с собой запах мха, сырости и далёких гарей. За стеной — дохлый звон цепи окна и далёкий собачий вой.",
      "Ты лежишь на каменном полу, не понимая — сон это или забытая быль. Тело чужое, тяжёлое: плечи — будто из гранита, руки свинцовые; каждое движение отзывается неприятной ломотой.",
      "Сквозь пустоту коридора проносится сиплый голос:<br/><br/><i>— Говорят, на южной стене ночью опять кто-то был. Огни за холмом… Только бы лорду нового горя не принесли.</i>",
      "Твои пальцы шарят по полу. Кольцо на пальце — печать Императора. Но почему ты здесь, в пыли?",
    ],
    choices: [
      {
        text: "Встать и заявить о себе (Легитимность +10)",
        effect: (res) => ({ legitimacy: res.legitimacy + 10 }),
        nextSceneId: 'throne_room',
      },
      {
        text: "Скрытно осмотреться (Армия +5, Золото -10)",
        effect: (res) => ({ army: res.army + 5, gold: res.gold - 10 }),
        nextSceneId: 'shadows',
      },
      {
        text: "Попытаться вспомнить прошлое (Ничего не менять)",
        nextSceneId: 'throne_room',
      },
    ],
  },
  throne_room: {
    id: 'throne_room',
    title: 'Тронный Зал',
    paragraphs: [
      "Ты толкаешь тяжелые дубовые двери. Стража вздрагивает. Они не ожидали увидеть тебя живым, тем более — стоящим на ногах.",
      "— Милорд? — шепчет капитан стражи, опуская алебарду. — Мы думали, яд сделал своё дело.",
      "Империя на грани краха. Казна пуста, а на севере бунтуют бароны. Тебе нужно принять решение.",
    ],
    choices: [
      {
        text: "Открыть карту Империи (Перейти к Стратегии)",
        nextSceneId: 'MAP_VIEW', // Special ID to trigger map switch
      },
    ],
  },
  shadows: {
    id: 'shadows',
    title: 'В тенях',
    paragraphs: [
      "Ты решаешь не привлекать внимания. Скользя вдоль стен, ты находишь тайник своего предшественника. Мешочек с золотом и карта тайных ходов.",
      "Однако твоё отсутствие сеет панику среди слуг.",
    ],
    choices: [
      {
        text: "Выйти к людям (Золото +20)",
        effect: (res) => ({ gold: res.gold + 20 }),
        nextSceneId: 'throne_room',
      },
    ],
  },
};